<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>syllabus</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="99_2024syllabus_files/libs/clipboard/clipboard.min.js"></script>
<script src="99_2024syllabus_files/libs/quarto-html/quarto.js"></script>
<script src="99_2024syllabus_files/libs/quarto-html/popper.min.js"></script>
<script src="99_2024syllabus_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="99_2024syllabus_files/libs/quarto-html/anchor.min.js"></script>
<link href="99_2024syllabus_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="99_2024syllabus_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="99_2024syllabus_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="99_2024syllabus_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="99_2024syllabus_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="以大學生為授課對象的實驗心理學開放科學取向課程計畫" class="level2">
<h2 class="anchored" data-anchor-id="以大學生為授課對象的實驗心理學開放科學取向課程計畫">以大學生為授課對象的「實驗心理學：開放科學取向」課程計畫</h2>
<p>本課程計畫根據所提供的九個來源，設計出以大學生為授課對象的「實驗心理學：開放科學取向」課程。課程將涵蓋實驗心理學的核心概念，並強調開放科學的做法，讓學生了解並應用於日後的學習和研究中。</p>
<section id="課程目標" class="level3">
<h3 class="anchored" data-anchor-id="課程目標"><strong>課程目標</strong></h3>
<ul>
<li>了解科學研究的流程，包含設計實驗、收集資料、分析資料、以及撰寫研究報告。</li>
<li>培養批判性思考的能力，學習如何評估科學研究的品質，以及如何識別和避免研究過程的主觀偏誤和過失。</li>
<li>認識開放科學的原則和實踐方法，將開放科學的理念應用到個人未來的知識工作。</li>
</ul>
</section>
<section id="課程架構" class="level3">
<h3 class="anchored" data-anchor-id="課程架構"><strong>課程架構</strong></h3>
<p>本課程分為八個單元，每個單元將針對實驗心理學和開放科學的重要主題進行深入探討。</p>
</section>
<section id="課程內容" class="level3">
<h3 class="anchored" data-anchor-id="課程內容"><strong>課程內容</strong></h3>
<section id="第一單元緒論與科學方法-第-1-2-週" class="level4">
<h4 class="anchored" data-anchor-id="第一單元緒論與科學方法-第-1-2-週"><strong>第一單元：緒論與科學方法 (第 1-2 週)</strong></h4>
<p><strong>課程目標：</strong></p>
<ul>
<li>了解「實驗心理學」這門課的目的，以及為何需要學習科學方法。</li>
<li>反思個人看待世界的方式，以及使用科學方法來檢驗自己的觀點。</li>
<li>透過閱讀文獻認識科學方法的七個步驟，明白統計方法在現代科學研究的重要性。</li>
</ul>
<!--- * 讓學生了解「再現危機」的概念，以及其對心理科學的影響。
 * 探討「發表偏誤」、「不正當的研究操作」和「缺乏透明度」等問題。--->
<p><strong>閱讀材料：</strong></p>
<p>Stein, R., &amp; Swan, A. B. (2019). Evaluating the validity of Myers‐Briggs Type Indicator theory: A teaching tool and window into intuitive psychology. Social and Personality Psychology Compass, 13(2), e12434. https://doi.org/10.1111/spc3.12434</p>
<p><strong>課程活動：</strong></p>
<pre><code>* 課堂討論：以 MBTI 為例，讓學生討論如何用科學方法來檢驗其有效性。
* NotebookLM 示範操作及演練</code></pre>
<!---    * 案例分析：探討心理學歷史上著名的科學不當行為案例，例如數據造假、剽竊等，並讓學生反思這些行為的後果。 --->
<blockquote class="blockquote">
<p>因為10/2颱風假緣故，第八單元：預先註冊研究的寫作指南拆分至各單元介紹。</p>
</blockquote>
</section>
<section id="第二單元演繹推理-第-35-週" class="level4">
<h4 class="anchored" data-anchor-id="第二單元演繹推理-第-35-週"><strong>第二單元：演繹推理 (第 3,5 週)</strong></h4>
<p><strong>課程目標：</strong></p>
<ul>
<li>運用AI工具學習如何運用演繹推理，從閱讀過程辨識需要證據支持或否定的研究問題和假設。</li>
<li>探討 Wason 推理作業的發展過程，了解脈絡資訊在演繹推理中的作用。</li>
<li>說明確證原則和反證原則在科學假設建立中的重要性。</li>
<li>學習如何將研究問題轉化為可以確證和反證的假設。</li>
</ul>
<!---* 介紹歸納推理和演繹推理在科學研究中的交互運用。--->
<p><strong>閱讀材料：</strong></p>
<p>Cosmides, L.; Tooby, J. (1992). “Cognitive Adaptions for Social Exchange”. In Barkow, J.; Cosmides, L.; Tooby, J. (eds.). The adapted mind: Evolutionary psychology and the generation of culture. New York: Oxford University Press. pp.&nbsp;163–228. ISBN 978-0-19-506023-2. https://www.cep.ucsb.edu/wp-content/uploads/2023/05/Cogadapt.pdf</p>
<p><strong>課程活動：</strong> * 文獻回顧練習：閱讀 Cosmides, L.; Tooby, J. (1992)，並嘗試： * 分辨Wason Selection Task的問題脈絡設計，討論研究者的問題脈絡設計是出自那些有關人類的推理能力的理論角度。</p>
</section>
<section id="第三單元文獻回顧與研究設計-第-6-7-週" class="level4">
<h4 class="anchored" data-anchor-id="第三單元文獻回顧與研究設計-第-6-7-週"><strong>第三單元：文獻回顧與研究設計 (第 6-7 週)</strong></h4>
<p><strong>課程目標：</strong></p>
<ul>
<li>學習如何整合zotero文獻管理軟體以及AI工具，有效率地收集、整理和管理文獻。</li>
<li>討論AI提問技巧和知識管理方法，掌握從文獻中萃取重要資訊的有效方法。</li>
<li>探討參與者間實驗設計和參與者內實驗設計的優缺點，以及如何根據研究目的選擇合適的設計。</li>
<li>學習如何識別和控制實驗設計中的混淆變項，確保研究結果的內在效度。</li>
</ul>
<!---  * 了解如何評估不同研究方法的證據強度，並辨別研究結果出錯的風險。 --->
<p><strong>閱讀材料：</strong></p>
<p>Chandler, J., Mueller, P., &amp; Paolacci, G. (2014). Nonnaïveté among Amazon Mechanical Turk workers: Consequences and solutions for behavioral researchers. Behavior Research Methods, 46, 112–130.</p>
<p>Zwaan, R. A., Pecher, D., Paolacci, G., Bouwmeester, S., Verkoeijen, P., Dijkstra, K., &amp; Zeelenberg, R. (2017). Participant Nonnaiveté and the reproducibility of cognitive psychology. Psychonomic Bulletin &amp; Review, 1–5. https://doi.org/10.3758/s13423-017-1348-y</p>
<p><strong>課程活動：</strong></p>
<ul>
<li><p>課堂討論：以 Chandler et al.&nbsp;(2015) 和 Zwaan et al.&nbsp;(2018) 討論如何設定可被否證的研究假設。</p>
<ul>
<li>摘錄兩份指定文獻與「非新手經驗」相關的關鍵詞和段落，並用自己的理解重新說明各自的研究問題。</li>
<li>摘錄符合有效研究假設設定條件的文字或圖表段落，並以能向他人報告的方式呈現。</li>
<li>Zotero軟體操作教學：實際操作zotero軟體，學習如何匯入文獻、做筆記、管理文獻等功能。</li>
</ul></li>
</ul>
<!---

    
    * 實驗設計練習：讓學生根據指定的論文，設計出不同的實驗版本，並比較不同設計的優缺點。
    * 課堂討論：以 Chandler et al. (2015) 和 Zwaan et al. (2018) 的研究為例，讓學生討論如何控制非新手經驗之外的混淆變項。

--->
</section>
<section id="第四單元歸納推理與資料分析-第-8-10-週" class="level4">
<h4 class="anchored" data-anchor-id="第四單元歸納推理與資料分析-第-8-10-週"><strong>第四單元：歸納推理與資料分析 (第 8-10 週)</strong></h4>
<p><strong>課程目標：</strong></p>
<ul>
<li>了解歸納推理在科學研究中的角色，以及如何運用統計方法從實驗資料中歸納出結論。</li>
<li>介紹心理學研究中常見的效果量指標，例如 Cohen’s d，以及如何計算和解釋這些指標。</li>
<li>學習如何使用 jamovi 等開源統計軟體進行資料分析，並了解如何選擇適當的統計模型。</li>
<li>運用公開資料評估直接重製研究結果，學習如何計算樣本數和考驗力。</li>
</ul>
<p><strong>閱讀材料：</strong></p>
<p>Zwaan, R. A., Pecher, D., Paolacci, G., Bouwmeester, S., Verkoeijen, P., Dijkstra, K., &amp; Zeelenberg, R. (2017). Participant Nonnaiveté and the reproducibility of cognitive psychology. Psychonomic Bulletin &amp; Review, 1–5. https://doi.org/10.3758/s13423-017-1348-y</p>
<p><a href="https://scgeeker.github.io/lsj-book-zh_tw/">用jamovi上手統計學</a></p>
<p><strong>課程活動：</strong></p>
<ul>
<li>jamovi 軟體操作教學：實際操作 jamovi 軟體，學習如何匯入資料、進行描述統計和推論統計分析、製作圖表等功能。</li>
<li>資料分析練習：使用 Zwaan et al.&nbsp;(2018) 的公開資料，練習如何計算平均數、標準差、 Cohen’s d 等指標，並使用 jamovi 軟體進行 t 檢定和變異數分析。</li>
<li>課堂討論：以 Zwaan et al.&nbsp;(2018) 的研究為例，討論如何評估非新手經驗對目標效果量的影響。</li>
</ul>
</section>
<section id="第五單元可重製的記憶研究-第-1113-週" class="level4">
<h4 class="anchored" data-anchor-id="第五單元可重製的記憶研究-第-1113-週"><strong>第五單元：可重製的記憶研究 (第 11,13 週)</strong></h4>
<ul>
<li><strong>課程目標：</strong>
<ul>
<li>透過經典記憶實驗的介紹，讓學生了解記憶研究的發展歷史和重要理論。</li>
<li>以 Zwaan et al.&nbsp;(2018) 重製的記憶實驗為例，讓學生學習如何比較不同實驗程序的差異，以及如何評估這些差異對實驗結果的影響。</li>
<li>讓學生了解如何使用開源實驗平台設計和執行線上實驗，並學習如何收集和分析實驗資料。</li>
</ul></li>
<li><strong>閱讀材料：</strong></li>
</ul>
<p>Greene, R. L. (1989). Spacing effects in memory: Evidence for a two-process account. Journal of Experimental Psychology: Learning, Memory, and Cognition, 15(3), 371–377. https://doi.org/10.1037/0278-7393.15.3.371</p>
<p>Murdock, B. B., Jr.&nbsp;(1962). The serial position effect of free recall. Journal of Experimental Psychology, 64(5), 482–488. https://doi.org/10.1037/h0045106</p>
<p>Roediger, H. L., &amp; McDermott, K. B. (1995). Creating false memories: Remembering words not presented in lists. Journal of Experimental Psychology: Learning, Memory, and Cognition, 21, 803–814. https://doi.org/10.1037/0278-7393.21.4.803</p>
<p><strong>課程活動：</strong></p>
<ul>
<li>線上實驗平台操作教學：實際操作 OpenSesame、formr 或 psytoolkit 等線上實驗平台，學習如何設計實驗、設定參數、收集資料等功能。</li>
<li>實驗設計練習：根據 Zwaan et al.&nbsp;(2018) 的實驗設計，嘗試使用中文材料重新設計實驗，並討論設計過程中遇到的問題和挑戰。</li>
<li>課堂討論：比較 Zwaan et al.&nbsp;(2018) 的實驗設計和原始實驗設計的差異，並討論這些差異是否會影響實驗結果的再現性。</li>
</ul>
</section>
<section id="第六單元可重製的心理計時學研究-第-14-15-週" class="level4">
<h4 class="anchored" data-anchor-id="第六單元可重製的心理計時學研究-第-14-15-週"><strong>第六單元：可重製的心理計時學研究 (第 14-15 週)</strong></h4>
<p><strong>課程目標：</strong> * 了解心理計時學的發展歷史和重要概念，例如反應時間、簡單反應時間、選擇反應時間、區辨反應時間等。 * 透過經典心理計時學實驗的介紹，讓學生了解心智歷程的彈性，以及如何透過實驗設計來探討這些歷程。 * 以 Zwaan et al.&nbsp;(2018) 重製的心理計時學實驗為例，讓學生學習如何比較不同實驗程序的差異，以及如何評估這些差異對實驗結果的影響。 * 讓學生了解如何使用開源實驗平台設計和執行線上心理計時學實驗，並學習如何收集和分析實驗資料。</p>
<ul>
<li><strong>閱讀材料：</strong></li>
</ul>
<p>Craft, J. L., &amp; Simon, J. R. (1970). Processing symbolic information from a visual display: Interference from an irrelevant directional cue. Journal of Experimental Psychology, 83(3), 415–420. https://doi.org/10.1037/h002884</p>
<p>Eimer, M., &amp; Schlaghecken, F. (1998). Effects of masked stimuli on motor activation: Behavioral and electrophysiological evidence. Journal of Experimental Psychology: Human Perception and Performance, 24(6), 1737–1747. https://doi.org/10.1037/0096-1523.24.6.1737</p>
<p>Eriksen, B. A., &amp; Eriksen, C. W. (1974). Effects of noise letters upon the identification of a target letter in a nonsearch task. Perception &amp; Psychophysics, 16(1), 143–149. https://doi.org/10.3758/BF03203267</p>
<p><strong>課程活動：</strong></p>
<ul>
<li>線上實驗平台操作教學：實際操作 OpenSesame、formr 或 psytoolkit 等線上實驗平台，學習如何設計心理計時學實驗、設定參數、收集資料等功能。</li>
<li>實驗設計練習：根據 Zwaan et al.&nbsp;(2018) 的實驗設計，嘗試使用不同的刺激材料或反應方式重新設計實驗，並討論設計過程中遇到的問題和挑戰。</li>
<li>資料分析練習：使用 Zwaan et al.&nbsp;(2018) 的公開資料，練習如何計算平均反應時間、正確率、效應量等指標，並使用 jamovi 軟體進行 t 檢定和變異數分析。</li>
<li>課堂討論：讓學生比較 Zwaan et al.&nbsp;(2018) 的實驗設計和原始實驗設計的差異，並討論這些差異是否會影響實驗結果的再現性。</li>
</ul>
</section>
<section id="第七單元可重製的語言研究-第-16-17-週" class="level4">
<h4 class="anchored" data-anchor-id="第七單元可重製的語言研究-第-16-17-週"><strong>第七單元：可重製的語言研究 (第 16-17 週)</strong></h4>
<p><strong>課程目標：</strong></p>
<ul>
<li>了解語言心理學的研究範疇和重要議題，例如語言習得、語言理解、語言產生等。</li>
<li>透過經典語言心理學實驗的介紹，讓學生了解字詞辨識、句子理解等認知歷程。</li>
<li>以 Zwaan et al.&nbsp;(2018) 重製的語言心理學實驗為例，讓學生學習如何比較不同實驗程序的差異，以及如何評估這些差異對實驗結果的影響。</li>
<li>讓學生了解如何使用開源實驗平台設計和執行線上語言心理學實驗，並學習如何收集和分析實驗資料。</li>
</ul>
<p><strong>閱讀材料：</strong></p>
<p>Forster, K., &amp; Davis, C. (1984). Repetition priming and frequency attenuation in lexical access. Journal of Experimental Psychology: Learning, Memory, and Cognition, 10(4), 680–698. https://doi.org/10.1037/0278-7393.10.4.680</p>
<p>Meyer, D. E., &amp; Schvaneveldt, R. W. (1971). Facilitation in recognizing pairs of words: Evidence of a dependence between retrieval operations. Journal of Experimental Psychology, 90(2), 227–234. https://doi.org/10.1037/h0031564</p>
<p>Zwaan, R. A., Stanfield, R. A., &amp; Yaxley, R. H. (2002). Language comprehenders mentally represent the shapes of objects. Psychological Science, 13, 168–171. https://doi.org/10.1111/1467-9280.0043</p>
<p><strong>課程活動：</strong></p>
<ul>
<li>線上實驗平台操作教學：實際操作 OpenSesame、formr 或 psytoolkit 等線上實驗平台，學習如何設計語言心理學實驗、設定參數、收集資料等功能。</li>
<li>實驗設計練習：讓學生根據 Zwaan et al.&nbsp;(2018) 的實驗設計，嘗試使用中文材料重新設計實驗，並討論設計過程中遇到的問題和挑戰。</li>
<li>資料分析練習：讓學生使用 Zwaan et al.&nbsp;(2018) 的公開資料，練習如何計算平均反應時間、正確率、效應量等指標，並使用 jamovi 軟體進行 t 檢定和變異數分析。</li>
<li>課堂討論：讓學生比較 Zwaan et al.&nbsp;(2018) 的實驗設計和原始實驗設計的差異，並討論這些差異是否會影響實驗結果的再現性。</li>
</ul>
</section>
<section id="第八單元預先註冊研究的寫作指南-分散教授" class="level4">
<h4 class="anchored" data-anchor-id="第八單元預先註冊研究的寫作指南-分散教授"><strong>第八單元：預先註冊研究的寫作指南 (分散教授)</strong></h4>
<p><strong>課程目標：</strong></p>
<ul>
<li><p>讓學生了解撰寫學術報告的重要性，以及如何撰寫符合科學規範的研究報告。</p></li>
<li><p>介紹 PRP-QUANT 模板，讓學生學習如何使用該模板撰寫預先註冊研究計畫書。</p></li>
<li><p>提供報告寫作的實用建議，涵蓋標題頁、摘要、緒論、方法、結果、討論、參考文獻等部分。</p></li>
<li><p>讓學生學習如何準備適用於公開場合的報告材料。</p></li>
<li><p><strong>閱讀材料：</strong></p></li>
</ul>
<p><a href="https://www.psycharchives.org/en/item/a417b468-7398-40e2-9050-4adad9e2078d">PRP-QUANT 模板說明網頁</a></p>
<p><strong>課程活動：</strong></p>
<pre><code>* 預先註冊研究計畫書撰寫練習：讓學生根據前幾週學習的內容，選擇一個感興趣的實驗心理學主題，並嘗試使用 PRP-QUANT 模板撰寫一份預先註冊研究計畫書。
* 報告寫作技巧教學：邀請老師或學長姐分享報告寫作的經驗和技巧，並讓學生練習如何設計簡報、製作海報等報告材料。 </code></pre>
</section>
</section>
<section id="評量方式" class="level3">
<h3 class="anchored" data-anchor-id="評量方式"><strong>評量方式</strong></h3>
<p>本課程將採用多元評量方式，以評估學生在不同面向的學習成效。</p>
<ul>
<li><strong>課堂參與 (20%)：</strong> 積極參與課堂討論、分享個人觀點、與同學交流互動。</li>
<li><strong>作業 (30%)：</strong> 包含文獻回顧、實驗設計、資料分析、研究報告寫作等。</li>
<li><strong>期中測驗 (25%)：</strong> 評量學生對前半學期課程內容的理解和掌握程度。</li>
<li><strong>期末測驗 (25%)：</strong> 評量學生對整體課程內容的理解和掌握程度，包含申論題，要求學生批判性地評估一項研究並提出改進建議。</li>
</ul>
</section>
<section id="參考書籍" class="level3">
<h3 class="anchored" data-anchor-id="參考書籍"><strong>參考書籍</strong></h3>
<ul>
<li>陳紹慶 (出版日期不詳). <strong>實驗心理學：開放科學取向 (第二版)</strong>.</li>
<li>American Psychological Association. (2020). Publication manual of the American Psychological Association (7th ed.). American Psychological Association.</li>
</ul>
<p><strong>備註:</strong> 本課程計畫僅供參考，教師可根據實際教學狀況和學生需求進行調整。</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>